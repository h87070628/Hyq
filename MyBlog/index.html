<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>CSS Dock Menu</title>
<script type="text/javascript" src="./js/jquery.js"></script>
<script type="text/javascript" src="./js/interface.js"></script>

<link href="./style.css" rel="stylesheet" type="text/css" />

<!--[if lt IE 7]>
<style type="text/css">
.dock img { behavior: url(iepngfix.htc) }
</style>
<![endif]-->

</head>
<body>
<script>
var x = 1;		//图片的index
var islogin=false;
</script>
<!--top dock -->
<div class="dock" id="dock">
<div class="dock-container">
<a class="dock-item" href="#" onclick="x++;if(x>9){x=1;}document.getElementById('im_0').src='./apple/'+x.toString()+'.png'; return false;">
<img src="images/home.png" alt="home" /><span>Home</span></a> 
<a class="dock-item" href="#"><img src="images/email.png" alt="contact" /><span>Contact</span></a> 
<a class="dock-item" href="#"><img src="images/portfolio.png" alt="portfolio" /><span>Portfolio</span></a> 
<a class="dock-item" href="#"><img src="images/music.png" alt="music" /><span>Music</span></a> 
<a class="dock-item" href="#"><img src="images/video.png" alt="video" /><span>Video</span></a> 
<a class="dock-item" href="#"><img src="images/history.png" alt="history" /><span>History</span></a> 
<a class="dock-item" href="#"><img src="images/calendar.png" alt="calendar" /><span>Calendar</span></a> 
<a class="dock-item" href="#"><img src="images/link.png" alt="rss" /><span>RSS</span></a>
<a class="dock-item" href="#"><img src="images/rss.png" alt="rss" /><span>RSS</span></a> 
<a class="dock-item" href="#"><img src="images/rss2.png" alt="rss" /><span>RSS2</span></a>
</div> 
</div>
<a id="login_mod" class="href_style" href="#" onclick="javascript:generateFloatLayer()">登陆</a>
<a id="regis_mod" class="href_style" href="#" onclick="javascript:CreteRegisterLayer()">注册</a>


<div id="popup" style="position:absolute; z-index:100; display:none; background-color:#eeeeee"></div>
<div id="register" style="position:absolute; z-index:100; display:none; background-color:#eeeeee"></div>

<div id="centen">
	<div id="body_item_begin">
		<img id="im_0" src="./apple/1.png" height=100px width=100px onclick="alert(document.getElementById('im_0').src)"/>
		<div class="item_contents">
			<h2><a class="href_style" href="./blog/1.html">中共发两部党内法规 首次拥党内"立法法"</a></h2>
			<p><a>“党内法规是党的制度的重要组成部分。”中央社会主义学院教授甄小英说，科学的党内法规决定着党的兴衰，也关系国家的命运。</a></p>
			<div>
				<p><a>2013-05-28 14:33</a></p>
			</div>
		</div>
	</div>
	<div class="body_item">
		<img id="im_1" src="./apple/2.png" height=100px align="center" onclick="alert(document.getElementById('im_1').src)"/>
		<div class="item_contents">
			<h2><a class="href_style" href="#" target="_blank">中纪委:纪检干部6月20日前清退所收受会员卡</a></h2>
			<p><a>会员卡虽小，折射出的却是作风建设的大问题，反映的是享乐主义和奢靡之风。这次活动标准并不高，既属必要，又具可行，应是大家都能做到的。</a></p>
			<div>
				<p><a>2013-05-21 11:27</a></p>
			</div>
		</div>
	</div>
	<div class="body_item">
		<img id="im_2" src="./apple/3.png" height=100px align="center" onclick="alert(document.getElementById('im_2').src)"/>
		<div class="item_contents">
			<h2><a class="href_style" href="#">专家:中国外交未陷孤立 外国领导人访华需排队</a></h2>
			<p><a>当今社会，首脑外交占据着尤为重要的地位。3月中旬中国新领导层履新至今，外交活动可以用“繁忙”二字来形容。</a></p>
			<div>
				<p><a>2013-05-20 16:53</a></p>
			</div>
		</div>
	</div>
	<div class="body_item">
		<img id="im_3" src="./apple/4.png" height=100px align="center" onclick="alert(document.getElementById('im_3').src)"/>
		<div class="item_contents">
			<h2><a class="href_style" href="#">中俄敲定最大规模陆地军演 拟建军事同盟</a></h2>
			<p><a>今夏俄将与中国在车里雅宾斯克州举行联合反恐军事演习，中俄双方将分别派出600人参加。俄媒称这是两国迄今最大规模的陆地联合反恐军演。</a></p>
			<div>
				<p><a>2013-05-27 04:37</a></p>
			</div>
		</div>
	</div>
	<div class="body_item">
		<img id="im_4" src="./apple/5.png" height=100px align="center" onclick="alert(document.getElementById('im_4').src)"/>
		<div class="item_contents">
			<h2><a class="href_style" href="#">大连：女骑警不是"花瓶" 每匹马月成本2500元</a></h2>
			<p><a>大连市公安局巡警支队副支队长于福田今天一大早就电话不断，来电讲的都是一件事：大连女骑警在网上“火”了。</a></p>
			<div>
				<p><a>2013-05-23 16:53</a></p>
			</div>
		</div>
	</div>
	<div id="body_item_end">
		<img id="im_5" src="./apple/6.png" height=100px align="center" onclick="alert(document.getElementById('im_5').src)"/>
		<div class="item_contents">
			<h2><a class="href_style" href="#">朝鲜：朴槿惠掀起了"让人脸红的裙子妖风"</a></h2>
			<p><a>据朝鲜5月25日报道，朝鲜国防委员会政策局发言人当天发表谈话点名批评韩国总统朴槿惠，并且提醒朴槿惠若对出言不逊刺激朝鲜，换来的只有耻辱和灭亡。</a></p>
			<div>
				<p><a>2013-05-26 10:33</a></p>
			</div>
		</div>
	</div>
	<div id="body_state">
		<ul id="links">
			<li>
				<a href="http://www.baidu.com/" class="href_style" target="_blank" title="百度">百度</a>
			</li>

			<li>
				<a href="http://www.google.com/" class="href_style" target="_blank" title="谷歌">谷歌</a>
			</li>
		</ul>
	</div>
</div>

	<div style="height:150px;">
	</div>


<!--dock menu JS options -->
<script type="text/javascript">

	$(document).ready(
			function()
			{
			$('#dock').Fisheye(
				{
maxWidth: 50,
items: 'a',
itemsText: 'span',
container: '.dock-container',
itemWidth: 40,
proximity: 40,
halign : 'center'
}
)
}
);

function generateFloatLayer(){
	floatArea=document.getElementById("popup");
	floatArea.style.display="none";
	divClose='<div id="close" style="position:absolute; right:10px; top:10px; left:auto; bottom:auto;"><form action="form_action.php" method="post"><br>user:<input id="user" type="text" name="user"><br>pass:<input id="pass" type="password" name="password"><br><br><br><a href="javascript:loginWeb();">Login</a>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<a href="javascript:closeFloat();">Close</a></form></div>';
	x=event.clientX + document.body.scrollLeft;
	y=event.clientY + document.body.scrollTop;
	floatArea.innerHTML=divClose+"<div id=\"floatcontent\"></div>";
	floatArea.style.border="black 1px solid";
	floatArea.style.left=(document.documentElement.scrollLeft+x-300)+"px";
	floatArea.style.top=(document.documentElement.scrollTop+y-10)+"px";
	floatArea.style.width="300px";
	floatArea.style.height="200px";
	floatArea.style.display="";
}

function CreteRegisterLayer(){
	floatArea=document.getElementById("register");
	floatArea.style.display="none";
	divClose='<div id="close_reg" style="position:absolute; right:10px; top:10px; left:auto; bottom:auto;"><br><form>user:<input id="user_reg" type="text" name="user"><br>pass:<input id="pass_reg" type="password" name="password"><br>again:<input id="pass2_reg" type="password" name="password2"><br><br><a href="javascript: register_user();">Register</a>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<a href="javascript:closeRegister();">Close</a></form></div>';
	x=event.clientX + document.body.scrollLeft;
	y=event.clientY + document.body.scrollTop;
	floatArea.innerHTML=divClose+"<div id=\"floatcontent_reg\"></div>";
	floatArea.style.border="black 1px solid";
	floatArea.style.left=(document.documentElement.scrollLeft+x-300)+"px";
	floatArea.style.top=(document.documentElement.scrollTop+y-10)+"px";
	floatArea.style.width="300px";
	floatArea.style.height="200px";
	floatArea.style.display="";
}
function closeRegister(){
	floatArea=document.getElementById("register");	
	floatArea.innerHTML="";
	floatArea.style.display="none";
}

function closeFloat(){
	floatArea=document.getElementById("popup");
	floatArea.innerHTML="";
	floatArea.style.display="none";
}

function loginWeb(){
	var user=document.getElementById("user");
	var pass=document.getElementById("pass");

	//alert(user.value);
	//alert(pass.value);

	var xmlhttp;
	if(window.XMLHttpRequest)
	{
		xmlhttp = new XMLHttpRequest();
	}
	else
	{
		xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
	}
	//创建ajax对象.

	xmlhttp.onreadystatechange=function()
	{
		if(xmlhttp.readyState==4 && xmlhttp.status==200)
		{


			//$arr = array('t_date'=>$temp[2],'status'=>$temp[3],'char_buf'=>$temp[4]);
			var json_obj = eval("("+xmlhttp.responseText+")");	//将从php传送过来的json对象转换成javascript对象.
			//alert(json_obj.t_date);

			if(json_obj.t_date == undefined)	//对象没有返回,登陆失败..
			{
				alert("user id or password error!!!");
			}
			else
			{
	   javascript:closeFloat();
	   document.getElementById("login_mod").innerHTML=json_obj.t_date;		//使用json对象.
	   document.getElementById("login_mod").onclick="";
	   alert("login success!" + (json_obj.status).length+"]["+(json_obj.char_buf).length);
			}

		}
	}
	//创建ajax对象的监听事件-回调函数.

	xmlhttp.open("GET","./php/login.php?user="+user.value+"&pass="+pass.value,true);
	//设置ajax对象的url和相关参数.
	//alert("111");

	xmlhttp.send();
	//通过ajax对象发送数据.
}

function register_user()
{
	var user=document.getElementById("user_reg");
	var pass=document.getElementById("pass_reg");
	var pass2=document.getElementById("pass2_reg");

	if(pass.value !== pass2.value)	
	{
		alert("Two password is no same.");
		return;
	}

	var xmlhttp;
	if(window.XMLHttpRequest)
	{
		xmlhttp = new XMLHttpRequest();
	}
	else
	{
		xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
	}
	//创建ajax对象.

	xmlhttp.onreadystatechange=function()
	{
		if(xmlhttp.readyState==4 && xmlhttp.status==200)
		{
			var json_obj = eval("("+xmlhttp.responseText+")");	//将从php传送过来的json对象转换成javascript对象.

			if(json_obj.t_date == undefined)	//对象没有返回,登陆失败..
			{
				alert("register error!!!");
			}
			else
			{
	   javascript:closeRegister();
	   //document.getElementById("login_mod").innerHTML=json_obj.t_date;		//使用json对象.
	   //document.getElementById("login_mod").onclick="";
	   alert("register success!");
			}
		}
	}

	alert(user.value+'||'+pass.value+'||'+pass2.value);
	xmlhttp.open("GET","./php/register.php?user="+user.value+"&pass="+pass.value,true);
	xmlhttp.send();
}

</script>
</body>
</html>
